(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{535:function(t,s,a){t.exports=a.p+"assets/img/015.91047ba0.png"},536:function(t,s,a){t.exports=a.p+"assets/img/016.7697251b.png"},537:function(t,s,a){t.exports=a.p+"assets/img/017.0c5dcbd0.png"},538:function(t,s,a){t.exports=a.p+"assets/img/018.05d9178b.png"},539:function(t,s,a){t.exports=a.p+"assets/img/019.7d8a21e8.png"},540:function(t,s,a){t.exports=a.p+"assets/img/020.79bc86e9.png"},541:function(t,s,a){t.exports=a.p+"assets/img/021.144ce3c8.png"},542:function(t,s,a){t.exports=a.p+"assets/img/022.9be5beef.png"},543:function(t,s,a){t.exports=a.p+"assets/img/023.158dc3e1.png"},544:function(t,s,a){t.exports=a.p+"assets/img/024.0fc0af97.png"},545:function(t,s,a){t.exports=a.p+"assets/img/025.b7a8625d.png"},546:function(t,s,a){t.exports=a.p+"assets/img/026.47737c29.png"},586:function(t,s,a){"use strict";a.r(s);var e=a(1),l=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简述"}},[t._v("#")]),t._v(" 简述")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("索引是一种"),s("strong",[t._v("有序")]),t._v("的数据结构。通过空间换时间")])]),t._v(" "),s("li",[s("p",[t._v("索引可以减少磁盘IO、可以降低排序消耗")])]),t._v(" "),s("li",[s("p",[t._v("索引占用磁盘空间(可忽略影响，在isd、idb等文件中存储)，降低了数据更新效率(需要更新所有结构)")])]),t._v(" "),s("li",[s("p",[t._v("索引在存储层完成，不同的存储引擎的索引结构不同")])])]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("strong",[t._v("没有索引")]),t._v("：全表扫描，即便已经找到了，还是会扫描表中的每一条数据")]),t._v(" "),s("p",[s("img",{attrs:{src:a(535),alt:"image-20231222211315171"}})]),t._v(" "),s("p",[s("strong",[t._v("有索引")]),t._v("：右侧是索引结构("),s("strong",[t._v("这里只是演示")]),t._v(")，查找36->48->45共三次，效率高")]),t._v(" "),s("p",[s("img",{attrs:{src:a(536),alt:"image-20231222211408632"}})]),t._v(" "),s("h2",{attrs:{id:"索引结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引结构"}},[t._v("#")]),t._v(" 索引结构")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("不指定则默认使用的是B+Tree索引")])]),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("索引类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("B+Tree索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("最常见的索引类型，大部分引擎都支持B+树索引")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Hash索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("底层数据结构是用哈希表实现的，只有精确匹配索引列的查询才有效，"),s("strong",[t._v("不支持范围查询")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("R-tree(空间索引)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("空间索引是MyISAM引擎的一个特殊索引类型，主要用于地理空间数据类型，通常使用较少")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Full-text(全文索引)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("是一种通过建立倒排索引，快速匹配文档的方式。类似于Lucene,Solr,ES")])])])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("索引类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("InnoDB")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("MyISAM")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("Memory")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("B+tree索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Hash索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("支持")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("R-tree索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不支持")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Full-text")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("5.6版本之后支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("支持")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("不支持")])])])]),t._v(" "),s("h2",{attrs:{id:"数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据结构"}},[t._v("#")]),t._v(" 数据结构")]),t._v(" "),s("h3",{attrs:{id:"二叉树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二叉树"}},[t._v("#")]),t._v(" 二叉树")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"title"}),s("ul",[s("li",[t._v("顺序插入时(右侧类型)，实际是链表，查询效率低(查找元素，需要遍历)")]),t._v(" "),s("li",[t._v("每个节点最多两个数据，数据量大时高度大，检索慢")])])]),s("p",[s("img",{attrs:{src:a(537),alt:"image-20231222213410338"}})]),t._v(" "),s("h3",{attrs:{id:"红黑树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#红黑树"}},[t._v("#")]),t._v(" 红黑树")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("红黑树可以解决第一个不平衡的问题，但是它也是二叉树，还是存在树高度大的问题")])]),s("p",[s("img",{attrs:{src:a(538),alt:"红黑树例子"}})]),t._v(" "),s("h3",{attrs:{id:"b-tree"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-tree"}},[t._v("#")]),t._v(" B-Tree")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("ul",[s("li",[t._v("B树(多路平衡查找树)")]),t._v(" "),s("li",[t._v("下方以一颗最大度数(即一个节点下的节点数)为3的b-tree为例(该节点最多有2个数)")]),t._v(" "),s("li",[t._v("具体可见可视化网站"),s("a",{attrs:{href:"https://www.cs.usfca.edu/~galles/visualization/Algorithms.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("数据结构可视化"),s("OutboundLink")],1)])])]),s("p",[s("img",{attrs:{src:a(539),alt:"image-20231222215953830"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("ul",[s("li",[t._v("B树解决了平衡和树深度的问题")]),t._v(" "),s("li",[t._v("每个点也是键和值绑在一起")])])]),s("h3",{attrs:{id:"b-tree-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-tree-2"}},[t._v("#")]),t._v(" B+Tree")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("B树的升级")])]),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("特性")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("B树")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("B+树")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("数据存储方式")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("键值和数据都存储在内部节点和叶子节点上")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("数据只存储在叶子节点，内部节点只存储键值（"),s("strong",[t._v("所有数据都会出现在叶子节点")]),t._v("）")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("叶子节点的链接")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("叶子节点是独立的，没有链接")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("所有的叶子节点都通过指针相互链接，形成一个链表结构")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("搜索效率")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("一般")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("由于"),s("strong",[t._v("所有数据都在叶子节点")]),t._v("，且叶子节点形成链表，因此搜索效率更高")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("插入和删除操作")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("效率一般")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("由于结构更简单，插入和删除操作通常更快")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(540),alt:"image-20231222221046681"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(541),alt:"image-20231222221412068"}})]),t._v(" "),s("h2",{attrs:{id:"b-tree索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-tree索引"}},[t._v("#")]),t._v(" B+Tree索引")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("ul",[s("li",[t._v("Mysql的B+树叶子节点是双向循环链表")]),t._v(" "),s("li",[t._v("这个特性有助于提高范围查询的性能，有助于叶子节点(数据都在这)的遍历")])])]),s("p",[s("img",{attrs:{src:a(542),alt:"image-20231222221822563"}})]),t._v(" "),s("h2",{attrs:{id:"hash索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hash索引"}},[t._v("#")]),t._v(" hash索引")]),t._v(" "),s("h3",{attrs:{id:"概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("ul",[s("li",[s("p",[t._v("哈希索引就是采用一定的hash算法，将键值换算成新的hash值，映射到对应的槽位上，然后存储在hash表中。")])]),t._v(" "),s("li",[s("p",[t._v("如果两个（或多个）键值，映射到一个相同的槽位上，他们就产生了hash冲突（也称为hash碰撞），可以通过链表来解决。")])]),t._v(" "),s("li",[s("p",[t._v("在MySQL中，支持hash索引的是Memory引擎，而InnoDB中具有自适应hash功能，hash索引是存储引擎根据B+Tree索引在指定条件下"),s("strong",[t._v("自动构")]),t._v(" "),s("strong",[t._v("建")]),t._v("的。")])])])]),s("p",[s("img",{attrs:{src:a(543),alt:"image-20231222222254541"}})]),t._v(" "),s("h3",{attrs:{id:"特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[t._v("#")]),t._v(" 特点")]),t._v(" "),s("ul",[s("li",[t._v("Hash索引只能用于对等比较(=，in),不支持范围查询(between,>,<,…)")]),t._v(" "),s("li",[t._v("无法利用索引完成排序操作(无效)")]),t._v(" "),s("li",[t._v("查询效率高，通常只需要一次检索就可以了(不出现hash冲突)，效率通常要高于B+tree索引")])]),t._v(" "),s("h2",{attrs:{id:"索引分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引分类"}},[t._v("#")]),t._v(" 索引分类")]),t._v(" "),s("h3",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("默认使用InnoDB，主键索引的结构是B+Tree")])]),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("分类")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("含义")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("特点")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("关键字")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("主键索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("针对于表中主键创建的索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("默认自动创建")]),t._v("，"),s("strong",[t._v("只能有一个")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("PRIMARY")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("唯一索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("避免同一个表中某数据列中的值重复")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可以有多个")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("UNIQUE")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("常规索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("快速定位特定数据")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可以有多个")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("无")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("全文索引")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("全文索引查找的是文本中的关键词，而不是比较索引中的值")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可以有多个")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("FULLTEXT")])])])]),t._v(" "),s("p",[t._v("在InnoDB中，根据"),s("strong",[t._v("索引存储形式")]),t._v("，还可以分为：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("分类")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("含义")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("特点")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("聚集索引(Clustered Index)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("将数据存储与索引放到了一块")]),t._v("，索引结构的叶子节点保存了"),s("strong",[t._v("行数据")])]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("必须有")]),t._v("而且只有一个")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("二级索引(Secondary Index)")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("将数据与索引分开存储")]),t._v("，索引结构的叶子节点关联的是对应的主键")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("可以存在多个")])])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"},[t._v("注意")]),s("ul",[s("li",[t._v("有主键，"),s("strong",[t._v("主键索引就是聚集索引")])]),t._v(" "),s("li",[t._v("没有主键，第一个唯一索引就是聚集索引")]),t._v(" "),s("li",[t._v("否则字段生成一个rowid为隐藏聚集索引")]),t._v(" "),s("li",[t._v("其它就是"),s("strong",[t._v("二级索引")]),t._v("("),s("strong",[t._v("辅助索引")]),t._v(")")])])]),s("p",[s("img",{attrs:{src:a(544),alt:"image-20231222224038214"}})]),t._v(" "),s("h3",{attrs:{id:"查询过程-回表查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询过程-回表查询"}},[t._v("#")]),t._v(" 查询过程(回表查询)")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[t._v("在InnoDB存储引擎中,不按主键查找")]),t._v(" "),s("p",[s("strong",[t._v("有二级索引")]),t._v(":")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("查询二级索引获取主键id,如果找不到，停止查询并返回空")])]),t._v(" "),s("li",[s("p",[t._v("使用主键值在聚簇索引中定位到完整的数据行")])])]),t._v(" "),s("p",[s("strong",[t._v("只有聚簇索引")]),t._v(":")]),t._v(" "),s("ul",[s("li",[t._v("直接查询聚簇索引")])])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 这里没有直接查找主键")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Arm'")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[s("img",{attrs:{src:a(545),alt:"image-20231222224259470"}})]),t._v(" "),s("h3",{attrs:{id:"问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),s("p",[t._v("以下SQL语句，哪个执行效率高？为什么？ 备注：id为主键，name字段创建的有索引；")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Arm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("第一条高，直接走聚集索引，第二条走回表查询。")]),t._v(" "),s("h2",{attrs:{id:"索引语法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引语法"}},[t._v("#")]),t._v(" 索引语法")]),t._v(" "),s("h3",{attrs:{id:"创建索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建索引"}},[t._v("#")]),t._v(" 创建索引")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("ul",[s("li",[t._v("可以为要查询的任意字段创建索引")]),t._v(" "),s("li",[t._v("主键索引和唯一索引需要字段值不能重复")]),t._v(" "),s("li",[t._v("主键索引只能有一个，会默认创建,不需要我们创建")])])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 索引可以关联一个(单列索引)或多个(联合、复合索引)表字段，默认创建的是常规索引(快速定位特定数据)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" FULLTEXT"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" index_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" table_name "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index_col_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 为book表创建常规索引")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" testIndex "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("on")]),t._v(" book "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("book_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 为用户表中用户名创建唯一索引")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("UNIQUE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" idx_user_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 为用户表中age和gender字段上创建一个唯一复合索引（这里的字段顺序有讲究，具体见后文）")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("CREATE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" idx_user_age_gender "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br")])]),s("h3",{attrs:{id:"查看索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看索引"}},[t._v("#")]),t._v(" 查看索引")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SHOW")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" book"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:a(546),alt:"image-20231222231407893"}})]),t._v(" "),s("h3",{attrs:{id:"删除索引"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除索引"}},[t._v("#")]),t._v(" 删除索引")]),t._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" index_name "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" table_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("-- 删除book表中的testIndex索引")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DROP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("INDEX")]),t._v(" testIndex "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ON")]),t._v(" book"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);s.default=l.exports}}]);